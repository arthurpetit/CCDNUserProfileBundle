{%- spaceless -%}

	{%- set scale_x = (scale_x is defined) ? scale_x : 100 -%}
	{%- set scale_y = (scale_y is defined) ? scale_y : 100 -%}
	{%- set rounded = (rounded is defined) ? rounded : 0 -%}
	
	{%- if user -%}
		{%- if user.getProfile -%}
			{%- if user.getProfile.getAvatar -%}
				{%- if user.getProfile.getAvatarIsRemote -%}
					{%- set avatar = user.getProfile.getAvatar -%}
				{%- else -%}
					{%- set avatar = asset('bundles/ccdncomponentcommon/images/profile/anonymous_avatar.gif') -%}
				{%- endif -%}
			{%- else -%}
				{%- set avatar = asset('bundles/ccdncomponentcommon/images/profile/anonymous_avatar.gif') -%}
			{%- endif -%}
		{%- else -%}
			{%- set avatar = asset('bundles/ccdncomponentcommon/images/profile/anonymous_avatar.gif') -%}
		{%- endif -%}
	{%- else -%}
		{%- set avatar = asset('bundles/ccdncomponentcommon/images/profile/anonymous_avatar.gif') -%}
	{%- endif -%}

	<img style="border-radius:{{ (rounded) ? rounded : 0 }}px;" class="avatar" width="{{ scale_x }}" height="{{ scale_y }}" src="{{- avatar -}}" alt="avatar">
	
{%- endspaceless -%}
